@page
@model CabManagement.Pages.Cabs.DetailsModel

@{
    ViewData["Title"] = "Details";
}

<h1>Cab Details - @Model.Cab.CabId</h1>

<div>
    <h4>Cab</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Cab.CabDriverName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Cab.CabDriverName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Cab.CabDriverPhNumber)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Cab.CabDriverPhNumber)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Cab.MakeModel)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Cab.MakeModel)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Cab.CabRatings)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Cab.CabRatings)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Cab.CabType)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Cab.CabType)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Cab.RegistrationNumber)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Cab.RegistrationNumber)
        </dd>
    </dl>
</div>


@if (Model.Cab.Booking.Any())
{
    <div>
        <h4> Bookings with this Cab </h4>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>@Html.DisplayNameFor(model => model.Cab.Booking[0].BookingType)</th>
                   
                    <th>@Html.DisplayNameFor(model => model.Cab.Booking[0].PickUp)</th>
                    <th>@Html.DisplayNameFor(model => model.Cab.Booking[0].Drop)</th>
                    <th>Extra Details</th>

                </tr>
            </thead>

            <tbody>
                

                @foreach (var item in Model.Cab.Booking)
                {
                    
                <tr>
                    <td>@Html.DisplayFor(modelitem => item.BookingType)</td>

                    <td>@Html.DisplayFor(modelitem => item.PickUp)</td>
                    <td>@Html.DisplayFor(modelitem => item.Drop)</td>

                    <td>
                        <a asp-page="/Bookings/Details" asp-route-id="@item.BookingId">Booking Details</a>
                    </td>
                    @*<td>
                             <a asp-page="/Routes/Details" asp-route-id="@item.Cab.Routes[item.BookingId].RouteId">Route Details</a>
                     </td>*@
                </tr>
                }

                <tr>
                    <th></th>
                    <th>Total Bookings</th>
                    <th>@Model.Cab.Booking.Count</th>
                    <th></th>
                

                </tr>
            </tbody>
        </table>
    </div>

}
else
{
    <div class="alert-warning">No current bookings for this cab.</div>
}


<div>
    <a asp-page="./Edit" asp-route-id="@Model.Cab.CabId">Edit</a> |
    <a asp-page="./Index">Back to List</a>
</div>
